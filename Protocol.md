Выполни этот протокол



Создать to do list всех шагов протокола, отобразить его пользователю.

Раздел. Список шагов

Шаг 1. Обработка задачи пользователя

Шаг 2. Подготовка к Research.

Шаг 3. Подготовка промтов для Reaserch.

Шаг 4. Reaserch

Шаг 5. Arhitect review

Шаг 6. Подготовка плана реализации задачи

Шаг 7. Выполнение

Шаг 8. Тесты.

Шаг 9. Итоговая проверка криво агентом

Шаг 10. Отчет

Шаг 11. Запросить коммит.





Четко следовать всем шагам до окончания либо выхода из протокола.



Имей ввиду что мы пишем небольшую программу, потому требования применяемые для крупных систем применять НЕЛЬЗЯ.



Обязательные шаги протокола:



Шаг 1. Обработка задачи пользователя.

agent-organizer выполни этот шаг.

Выполнить Раздел. Начало Шага



Список Задач:

1. Запрос пользователя при помощи sequential-thinking обработать и ответить на вопрос что хочет пользователь, почему для него это важно и как лучше подойти к решению задачи, как ее исходя из этого надо решать.

2\. Создать Папку для задачи в TASKS\\ по правилам -> Раздел.Правила хранения.

3\. На этом шаге нельзя выбирать агентов исполнителей.

4. Завершение шага по правилам -> Раздел. Завершение шага



Шаг 2. Подготовка к Research.

agent-organizer выполни этот шаг.

Выполнить Раздел. Начало Шага

Список Задач:

1. Изучить - Раздел. Команда Агентов.
2. На основе итогов Шага 1 выбрать команду специализированных агентов из доступной базы агентов для проведения исследования.
3. Проверить несколько вариантов агентов из доступной базы, выбрать наиболее подходящий вариант по количеству агентов и их специализации.
4. Создать Папку Research\\ в каталоге ошибки. Создать внутри нее папки для Агентов(которые будут проводить Research) , папки называть по имени агента. Правила -> Раздел.Правила хранения.

5\. Завершение шага по правилам -> Раздел. Завершение шага





Шаг 3. Подготовка промтов для Reaserch.

agent-organizer выполни этот шаг.

Выполнить Раздел. Начало Шага

Список Задач:

1. СОздать папку для prompt-engineer с его именем. Правила -> Раздел.Правила хранения.
2. Вызвать параллельно несколько prompt-engineer с изолированным контекстом для создания промтов для всех агентов исполнителей. Другим способом не делай.
3. Дать четкую задачу создать промт для Research каждому агенту который будет проводить Research. Задание должно быть точным понятным и специализированным. Соблюдай Раздел. Исследования и изменения.
4. После создания каждый prompt-engineer сохраняет промты в папке а также дополнтельо в папке агентов которые будут проводить Reaserch. Название файла task\_research\_{название агента}.md



Завершение шага по правилам -> Раздел. Завершение шага



Шаг 4. Reaserch

agent-organizer выполни этот шаг.

Выполнить Раздел. Начало Шага

Список Задач:

1. Активировать агентов исполнителей параллельно каждый в изолированном контекстно.Другим способом не делай.
2. Дать команду выбраным агентам провести исследование. Соблюдай Раздел. Исследования и изменения.
3. Задание на исследование в папке агента в файле task\_research\_{название агента}.md
4. Итоги исследования агентам - записать в файл Reaserch\_{название агента}.md в свою папку. Правила -> Раздел.Правила хранения.

5\. Завершение шага по правилам -> Раздел. Завершение шага



Шаг 5. Arhitect review

agent-organizer выполни этот шаг.

Выполнить Раздел. Начало Шага

Список Задач:

1. Создать папку для architect-reviewer в папке Research\\ с его именем.
2. Вызвать агента prompt-engineer с изолированным контекстом и попросить его подготовить промт для Arhitect review по всем проведенным Research агентами. Промт сохранить в папке architect-reviewer .
3. Важно чтобы Агент не превышел лимит в 4000 токенов. Цель - точность, а не большой размер. Если нужно агент может создавать несколько файлов Arhitect\_research\_review\_{НомерФайла}.md для разделения информации на части.
4. В изолированным контексте дать задание architect-reviewer на Arhitect review всего проведенного Research. Arhitect review должно соблюдать Раздел. Исследования и изменения.
5. Агент записывает результаты в папке Research\\ в файл с названием Arhitect\_research\_review.md.

6\. Завершение шага по правилам -> Раздел. Завершение шага



Шаг 6. Подготовка плана реализации задачи

agent-organizer выполни этот шаг.

Выполнить Раздел. Начало Шага

Список Задач:

1. На основе шага 5 собрать команду реализации задачи, координаторов и исполнителей. Составить план для реализации локально, сохранить в папку задачи и назвать Plan.md. Соблюдать Раздел. Исследования и изменения.

2\. Создать папку IMPLEMEN\\ Правила -> Раздел.Правила хранения.

3\. Создать в этой папке для каждого агента свою папку. В плане нужно указать список агентов, способ координации исполнителей и что можно запускать параллельно.

4\. Активировать с изолированным контекстом architect-reviewer.

5\. Отдать план на проверку агенту architect-reviewer. Агент architect-reviewer сохранет итоги в файл plan\_review.md

6\. Спросить у пользователя что из plan\_review одобрить и внести в Plan.md.

7\. Получить ответа от пользователя при необходимости внести изменения в план.

8\. Активировать параллельно с изолированным контекстом столько context\_agent сколько агентов исполнителей.

9\. Дать им всем задачу подготовки контекста для каждого специализированного агента исполнителя. Учесть специализацию агента исполнителя, его участие и его участие в общем плане.

10\. Агенты подготовленный контекст сохраняют в папку агента исполнителя с именем context\_info.md.

11\. Доп задача для context\_agent: В конце файла context\_info.md добавить раздел Дополнительная информация и ресурсы. Добавить в этот раздел возможность использования агентами всей папки \\Research и полный список файлов, которые в ней и подпапках содержатся. Опиши коротко какая информация в них содержится для дополнительного более глубокого изучения при необходимости.

12\. Подготовить task.md для каждого агента-исполнителя. Правила - Раздел. Подготовка задач.

13\. Сохранить задачи для каждого агента исполнителя в папке агента исполнителя с названием task.md.

14\. Завершение шага по правилам -> Раздел. Завершение шага



Шаг 7. Выполнение

agent-organizer выполни этот шаг.

Выполнить Раздел. Начало Шага

Список Задач:

1. Перед реализацией бэкап создавать не надо.
2. На основе шага 6 запустить исполнение задачи, используя готовый план, выбранных агентов, готовый для них task.md и context\_info.md Если можно запустить параллельно - тогда параллельно. Каждый агент перед началом работы должен использовать mcp context7 для получения свежих данных для кодирования. Каждого агента запустить с изолированным контекстом.

3\. По итогам работы каждому исполнителю создать в своей папке файлы: Правила -> Раздел.Правила хранения.

EXECUTION\_LOG\_V1.md где 1-это номер попытки

CHANGES\_V1.diff где 1-это номер попытки

REPORT\_V1.md где 1-это номер попытки

SUMMARY\_V1.md где 1-это номер попытки

(Если агент переделывает свою работу заново или вносит изменения то создать новый файл , а номер увеличить на 1.)

4\. Завершение шага по правилам -> Раздел. Завершение шага





Шаг 8. Тесты.

agent-organizer выполни этот шаг.

Выполнить Раздел. Начало Шага

Список Задач:

1. Иметь ввиду что тесты делаются в среде windows 11 на ноутбуке пользователя, с неполным окружением, а приложение будет работать на сервере Ubuntu 24.04
2. Запустить агента тест-автоматора с изолированным контекстом для создания тестов и тестирования всей работы проведенной на шаге 7.

2\. Создать для него папку с его именем в директории задачи

3\. Результы работы и тестирования сохранить в этой папке.

4\. Завершение шага по правилам -> Раздел. Завершение шага





Шаг 9. Итоговая проверка криво агентом

agent-organizer выполни этот шаг.

Выполнить Раздел. Начало Шага

Список Задач:

1. По окончании работы каждого агента - запустить параллельно несколько krivo-agent с изолированным контекстом в рабочей папке каждого агента. Его задача проверить работу агента.
2. Результат проверки агент записывает в папку провереряемых агентов с названием krivo\_agent\_review.md с рекомендацией нужно переделать или нужно исправить.

3\. Если исправлений от krivo-agent есть для нескольких агентов то по каждому задать вопрос пользователю отдельно.

4\. Нужно показать короткий отчет от krivo-agent и задать вопрос:

Задать вопрос пользователю и получить ответ :Переделать агенту работу заново или внести исправления(укажите объем исправлений)?

5\. Если пользователь просит внести изменения то запускается специализированный агент с названием папки и выполняет работу начиная с Шага 7 далее Шаг 8 и Шаг 9, пока вся работа не будет выполнена.

6\. Завершение шага по правилам -> Раздел. Завершение шага



Шаг 10. Отчет

agent-organizer выполни этот шаг.

Выполнить Раздел. Начало Шага

Список Задач:

1. Проверить всю проведенную работу по каджому шагу на предмет сбоев, прерываний, не полного 1. исполнения задачи

2\. По итогам работы составить полный итоговый отчет. Сохранить в EXECUTION\_report.md в корневой папке задачи.

3\. Проверить Собранная в процессе работы информация содержит ли полное описание какой либо системы или нет. Если да то предложить пользователю создать Подробный отчет по этой системе для сохранения и использования дальше.

4\. Завершение шага по правилам -> Раздел. Завершение шага



Шаг 11. Запросить коммит.

agent-organizer выполни этот шаг.

Выполнить Раздел. Начало Шага

Список Задач:

1. Показать короткую сводку и предожить сделать коммит без пуша. По окончании уведомить о выполнении Протокола.

2\. Сообщить о выполнении протокола.



Конец Шагов Протокола.



Правила работы внутри Шагов:



Раздел. Начало Шага

Использовать TodoWrite tool для создания двухуровнего to do листа.

Проверить правильность построения to do листа из списка шагов.

Добавить внутрь текущего шага в to doлисте - to do лист второго уровня, составить его из списка задач текущего шага.



Раздел. Завершение шага

1. Проверить полностью ли выполнен шаг.Проверить все ли задачи выполнены и все ли файлы созданы. (Проверить TodoWrite: все задачи имеют status: "completed"? ✅/❌)

2\. Добавить в task\_EXECUTION\_LOG.md информацию о сделанном по каждой задаче.

3\. Выдать пользователю ссылки на созданные и измененные файлы и папки. Показать список. Выдать в чате короткий отчет о сделанном.

4\. Спросить разрешения продолжать дальше. Да/Нет.



Раздел.Правила хранения.

Правила хранения информации стуктура папок и файлов находится здесь: C:\\Users\\l0934\\Projects\\VoxPersona\\AGENTS\_WORKFLOW\_V2.md - Раздел 2. СИСТЕМА ХРАНЕНИЯ КОНТЕКСТА И ОТЧЕТОВ



Раздел. Команда Агентов.

Ссылка на список агентов: C:\\Users\\l0934\\Projects\\VoxPersona\\AGENTS\_WORKFLOW\_V2.md - Раздел 1. Команда агентов.



Раздел. Исследования и изменения.

Все Reasearch нужно проводить исключительно на сервере в реальном коде контейнера приложения. Однако изменения будут вносится в локальную версию, а потом заливаться на сервер.



Правила - Раздел. Подготовка задач.

  Правила -> Раздел.Правила хранения.

  Исполнители:

  - agent-organizer → создает организационную структуру

  - architect-reviewer → добавляет технические детали

  Последовательность:

  Для каждого агента в команде:

    1. agent-organizer создает task\_draft.md

    2. architect-reviewer обогащает → task.md

 ┌─────────────────────────────────────────────────────────┐

  │ ЭТАП 1: agent-organizer (Организационная часть)        │

  ├─────────────────────────────────────────────────────────┤

  │ ✅ Декомпозирует Plan.md на части                       │

  │ ✅ Определяет границы ответственности каждого агента    │

  │ ✅ Указывает зависимости (кто от кого зависит)          │

  │ ✅ Ссылается на context\_info.md                         │

  │ ✅ Определяет порядок выполнения (параллельно/последов.)│

  │                                                         │

  │ СОЗДАЕТ: task\_draft.md (черновик)                      │

  └─────────────────────────────────────────────────────────┘



  ┌─────────────────────────────────────────────────────────┐

  │ ЭТАП 2: architect-reviewer (Техническая часть)         │

  ├─────────────────────────────────────────────────────────┤

  │ ✅ Добавляет архитектурные требования                   │

  │ ✅ Указывает конкретные файлы и функции                 │

  │ ✅ Определяет data models и API endpoints               │

  │ ✅ Добавляет технические ограничения                    │

  │ ✅ Формулирует acceptance criteria                      │

  │ ✅ Указывает паттерны и best practices                  │

  │                                                         │

  │ СОЗДАЕТ: task.md (финальное ТЗ)                        │

  └─────────────────────────────────────────────────────────┘

