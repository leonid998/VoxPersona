# –ê–Ω–∞–ª–∏–∑ –≤—Å–µ—Ö –º–µ–Ω—é –≤ VoxPersona Telegram Bot

## –ü—Ä–æ–±–ª–µ–º–∞
–ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –º–µ–Ω—é (–∫–Ω–æ–ø–æ–∫) —Ç–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Å—Ç–∞–µ—Ç—Å—è, –∑–∞—Ö–ª–∞–º–ª—è—è —á–∞—Ç.

## –¢–µ–∫—É—â–∏–π –º–µ—Ö–∞–Ω–∏–∑–º –æ—á–∏—Å—Ç–∫–∏
**menu_manager.py:77-118** - `_remove_old_menu_buttons()`
```python
await app.edit_message_reply_markup(
    chat_id=chat_id,
    message_id=last_menu_id,
    reply_markup=None  # ‚ùå –£–¥–∞–ª—è–µ—Ç –¢–û–õ–¨–ö–û –∫–Ω–æ–ø–∫–∏, —Ç–µ–∫—Å—Ç –æ—Å—Ç–∞–µ—Ç—Å—è!
)
```

## –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –º–µ–Ω—é

### 1. –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é (Main Menu)
**–§–∞–π–ª:** menus.py:35-37, handlers.py:869
**–¢–µ–∫—Å—Ç:** `"üè† –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é:"`
**–§—É–Ω–∫—Ü–∏—è:** `send_main_menu()`
**–ö–Ω–æ–ø–∫–∏:** main_menu_markup()
- üí¨ –†–µ–∂–∏–º –¥–∏–∞–ª–æ–≥–∞
- üì± –ß–∞—Ç—ã
- ‚öôÔ∏è –°–∏—Å—Ç–µ–º–Ω–∞—è
- ‚ùì –ü–æ–º–æ—â—å

### 2. –†–µ–∂–∏–º –¥–∏–∞–ª–æ–≥–∞ (Dialog Mode Menu)
**–§–∞–π–ª:** handlers.py:857-879
**–¢–µ–∫—Å—Ç:** `"–ö–∞–∫—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤—ã —Ö–æ—Ç–µ–ª–∏ –±—ã –ø–æ–ª—É—á–∏—Ç—å?"`
**–§—É–Ω–∫—Ü–∏—è:** `handle_menu_dialog()`
**–ö–Ω–æ–ø–∫–∏:** make_dialog_markup()
- üîç/‚úÖ –ì–ª—É–±–æ–∫–æ–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ (toggle)
- –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é

### 3. –ú–µ–Ω—é —á–∞—Ç–æ–≤ (Chats Menu)
**–§–∞–π–ª:** handlers.py:504, conversation_handlers.py
**–¢–µ–∫—Å—Ç:** `"üí¨ –í–∞—à–∏ —á–∞—Ç—ã:"`
**–§—É–Ω–∫—Ü–∏—è:** callback "menu_chats"
**–ö–Ω–æ–ø–∫–∏:** chats_menu_markup_dynamic()
- üÜï –ù–æ–≤—ã–π —á–∞—Ç + –ù–∞–∑–∞–¥
- üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ + üìÑ –ú–æ–∏ –æ—Ç—á–µ—Ç—ã
- –°–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤ (üìù –∞–∫—Ç–∏–≤–Ω—ã–π, üí¨ –æ—Å—Ç–∞–ª—å–Ω—ã–µ)

### 4. –ù–æ–≤—ã–π —á–∞—Ç —Å–æ–∑–¥–∞–Ω
**–§–∞–π–ª:** conversation_handlers.py:113-124
**–¢–µ–∫—Å—Ç:**
```
"‚ú® –ù–æ–≤—ã–π —á–∞—Ç —Å–æ–∑–¥–∞–Ω!

–ö–∞–∫—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤—ã —Ö–æ—Ç–µ–ª–∏ –±—ã –ø–æ–ª—É—á–∏—Ç—å?

–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:"
```
**–§—É–Ω–∫—Ü–∏—è:** `handle_new_chat()`
**–ö–Ω–æ–ø–∫–∏:** make_dialog_markup()

### 5. –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —á–∞—Ç–∞
**–§–∞–π–ª:** conversation_handlers.py:213-233
**–¢–µ–∫—Å—Ç:**
```
"‚úÖ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–æ –Ω–∞ —á–∞—Ç: {–Ω–∞–∑–≤–∞–Ω–∏–µ}

üìú –ü–æ—Å–ª–µ–¥–Ω–∏–µ 5 —Å–æ–æ–±—â–µ–Ω–∏–π:
[–∏—Å—Ç–æ—Ä–∏—è]

–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:"
```
**–§—É–Ω–∫—Ü–∏—è:** `handle_switch_chat_confirm()`
**–ö–Ω–æ–ø–∫–∏:** make_dialog_markup()

### 6. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —á–∞—Ç–∞
**–§–∞–π–ª:** handlers.py (—á–µ—Ä–µ–∑ callback)
**–¢–µ–∫—Å—Ç:** `"üîÑ –ü–µ—Ä–µ–π—Ç–∏ –≤ —á–∞—Ç '{–Ω–∞–∑–≤–∞–Ω–∏–µ}'?"`
**–§—É–Ω–∫—Ü–∏—è:** `handle_switch_chat_request()`
**–ö–Ω–æ–ø–∫–∏:** switch_chat_confirmation_markup()
- ‚úÖ –î–∞, –ø–µ—Ä–µ–π—Ç–∏
- ‚ùå –û—Ç–º–µ–Ω–∞

### 7. –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ —á–∞—Ç–∞ (—Ä–µ–∑—É–ª—å—Ç–∞—Ç)
**–§–∞–π–ª:** conversation_handlers.py:341-348
**–¢–µ–∫—Å—Ç:** `"‚úÖ –ß–∞—Ç –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω –≤ '{–Ω–∞–∑–≤–∞–Ω–∏–µ}'\n\n–í–∞—à–∏ —á–∞—Ç—ã:"`
**–§—É–Ω–∫—Ü–∏—è:** `handle_rename_chat_input()`
**–ö–Ω–æ–ø–∫–∏:** chats_menu_markup_dynamic()

### 8. –£–¥–∞–ª–µ–Ω–∏–µ —á–∞—Ç–∞ (—Ä–µ–∑—É–ª—å—Ç–∞—Ç)
**–§–∞–π–ª:** conversation_handlers.py:438-461
**–¢–µ–∫—Å—Ç:**
- –ï—Å–ª–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–π: `"‚úÖ –ß–∞—Ç —É–¥–∞–ª–µ–Ω\n\n–≠—Ç–æ –±—ã–ª –≤–∞—à –ø–æ—Å–ª–µ–¥–Ω–∏–π —á–∞—Ç. –°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π —á–∞—Ç.\n\n–í–∞—à–∏ —á–∞—Ç—ã:"`
- –ï—Å–ª–∏ –Ω–µ –ø–æ—Å–ª–µ–¥–Ω–∏–π: `"‚úÖ –ß–∞—Ç —É–¥–∞–ª–µ–Ω\n\n–í–∞—à–∏ —á–∞—Ç—ã:"`
**–§—É–Ω–∫—Ü–∏—è:** `handle_delete_chat_confirm()`
**–ö–Ω–æ–ø–∫–∏:** chats_menu_markup_dynamic()

### 9. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è —á–∞—Ç–∞
**–¢–µ–∫—Å—Ç:** `"‚ö†Ô∏è –£–¥–∞–ª–∏—Ç—å —á–∞—Ç '{–Ω–∞–∑–≤–∞–Ω–∏–µ}'?\n\n–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ."`
**–§—É–Ω–∫—Ü–∏—è:** `handle_delete_chat_request()`
**–ö–Ω–æ–ø–∫–∏:** delete_chat_confirmation_markup()
- üóëÔ∏è –î–∞, —É–¥–∞–ª–∏—Ç—å
- ‚ùå –û—Ç–º–µ–Ω–∞

### 10. –ü–æ–º–æ—â—å (Help Menu)
**–§–∞–π–ª:** handlers.py:494
**–¢–µ–∫—Å—Ç:** –î–ª–∏–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏ (help_menu_markup()[1])
**–§—É–Ω–∫—Ü–∏—è:** callback "menu_help"
**–ö–Ω–æ–ø–∫–∏:** help_menu_markup()[0]
- ¬´ –ù–∞–∑–∞–¥

### 11. –°–∏—Å—Ç–µ–º–Ω–∞—è (System Menu)
**–§–∞–π–ª:** handlers.py:500
**–¢–µ–∫—Å—Ç:** `"‚öôÔ∏è –°–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:"`
**–§—É–Ω–∫—Ü–∏—è:** callback "menu_system"
**–ö–Ω–æ–ø–∫–∏:** system_menu_markup()
- üìÅ –•—Ä–∞–Ω–∏–ª–∏—â–µ
- ¬´ –ù–∞–∑–∞–¥

### 12. –•—Ä–∞–Ω–∏–ª–∏—â–µ (Storage Menu)
**–§–∞–π–ª:** handlers.py:719
**–¢–µ–∫—Å—Ç:** `"üì¶ –ú–µ–Ω—é —Ö—Ä–∞–Ω–∏–ª–∏—â–∞:"`
**–§—É–Ω–∫—Ü–∏—è:** callback "menu_storage"
**–ö–Ω–æ–ø–∫–∏:** storage_menu_markup()
- –ê—É–¥–∏–æ —Ñ–∞–π–ª—ã
- ¬´ –ù–∞–∑–∞–¥

### 13. –°–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤
**–§–∞–π–ª:** handlers.py:566
**–¢–µ–∫—Å—Ç:** `"–§–∞–π–ª—ã –≤ '{–∫–∞—Ç–µ–≥–æ—Ä–∏—è}':"`
**–§—É–Ω–∫—Ü–∏—è:** callback "view||{category}"
**–ö–Ω–æ–ø–∫–∏:** files_menu_markup()
- –§–∞–π–ª—ã —Å –∫–Ω–æ–ø–∫–∞–º–∏ (–Ω–∞–∑–≤–∞–Ω–∏–µ, ‚ùå)
- –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª
- ¬´ –ù–∞–∑–∞–¥

### 14. –í—ã–±–æ—Ä —Å—Ü–µ–Ω–∞—Ä–∏—è (Interview/Design)
**–§–∞–π–ª:** handlers.py:497
**–¢–µ–∫—Å—Ç:** `"–ß—Ç–æ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º?:"`
**–§—É–Ω–∫—Ü–∏—è:** callback "menu_main" (—Å—Ç–∞—Ä—ã–π –∫–æ–¥)
**–ö–Ω–æ–ø–∫–∏:** interview_or_design_menu()
- –ò–ù–¢–ï–†–í–¨–Æ
- –î–ò–ó–ê–ô–ù
- ¬´ –ù–∞–∑–∞–¥

### 15. –í—ã–±–æ—Ä —Ç–∏–ø–∞ –∑–∞–≤–µ–¥–µ–Ω–∏—è
**–§–∞–π–ª:** handlers.py:752
**–¢–µ–∫—Å—Ç:** `"–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –∑–∞–≤–µ–¥–µ–Ω–∏—è:"`
**–§—É–Ω–∫—Ü–∏—è:** —Ä–∞–∑–ª–∏—á–Ω—ã–µ callbacks
**–ö–Ω–æ–ø–∫–∏:** building_type_menu_markup()
- –û—Ç–µ–ª—å
- –†–µ—Å—Ç–æ—Ä–∞–Ω
- –¶–µ–Ω—Ç—Ä –∑–¥–æ—Ä–æ–≤—å—è

### 16. –ú–µ–Ω—é –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
**–§–∞–π–ª:** menus.py:39-67
**–¢–µ–∫—Å—Ç:** –°–≤–æ–¥–∫–∞ –≤—Å–µ—Ö –ø–æ–ª–µ–π (confirm_menu_markup()[1])
**–§—É–Ω–∫—Ü–∏—è:** `show_confirmation_menu()`
**–ö–Ω–æ–ø–∫–∏:** confirm_menu_markup()[0]
- ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å
- ‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å

### 17. –ú–µ–Ω—é —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
**–§–∞–π–ª:** menus.py:69-77
**–¢–µ–∫—Å—Ç:** `"–ö–∞–∫–æ–µ –ø–æ–ª–µ —Ö–æ—Ç–∏—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å?"`
**–§—É–Ω–∫—Ü–∏—è:** `show_edit_menu()`
**–ö–Ω–æ–ø–∫–∏:** edit_menu_markup()
- –ü–æ–ª—è –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚¨ÖÔ∏è –ù–∞–∑–∞–¥

### 18. –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø—Ä–∏ –Ω–∞—Ä—É—à–µ–Ω–∏–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
**–§–∞–π–ª:** handlers.py:374-383
**–¢–µ–∫—Å—Ç:**
```
"üìå –î–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã:

1Ô∏è‚É£ –í—ã–±–µ—Ä–∏—Ç–µ —á–∞—Ç –∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π
2Ô∏è‚É£ –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º –ø–æ–∏—Å–∫–∞ (–±—ã—Å—Ç—Ä—ã–π –∏–ª–∏ –≥–ª—É–±–æ–∫–∏–π)
3Ô∏è‚É£ –ó–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å

–û—Ç–∫—Ä–æ–π—Ç–µ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –Ω–∏–∂–µ üëá"
```
**–§—É–Ω–∫—Ü–∏—è:** handle_authorized_text (–ø—Ä–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏)
**–ö–Ω–æ–ø–∫–∏:** main_menu_markup()

## –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–æ–≤ –º–µ–Ω—é

### –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã (–Ω—É–∂–Ω–æ —É–¥–∞–ª—è—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é)
–ö–æ—Ä–æ—Ç–∫–∏–µ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –∫ –¥–µ–π—Å—Ç–≤–∏—é, –Ω–µ –Ω–µ—Å—É—â–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–π —Ü–µ–Ω–Ω–æ—Å—Ç–∏:
1. "üè† –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é:"
2. "–ö–∞–∫—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤—ã —Ö–æ—Ç–µ–ª–∏ –±—ã –ø–æ–ª—É—á–∏—Ç—å?"
3. "üí¨ –í–∞—à–∏ —á–∞—Ç—ã:"
4. "‚öôÔ∏è –°–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:"
5. "üì¶ –ú–µ–Ω—é —Ö—Ä–∞–Ω–∏–ª–∏—â–∞:"
6. "–§–∞–π–ª—ã –≤ '{–∫–∞—Ç–µ–≥–æ—Ä–∏—è}':"
7. "–ß—Ç–æ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º?:"
8. "–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –∑–∞–≤–µ–¥–µ–Ω–∏—è:"
9. "–ö–∞–∫–æ–µ –ø–æ–ª–µ —Ö–æ—Ç–∏—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å?"
10. "üîÑ –ü–µ—Ä–µ–π—Ç–∏ –≤ —á–∞—Ç '{–Ω–∞–∑–≤–∞–Ω–∏–µ}'?"

### –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ (–º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å —Ç–µ–∫—Å—Ç, —É–¥–∞–ª–∏—Ç—å –∫–Ω–æ–ø–∫–∏)
–ù–µ—Å—É—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—É—é —Ü–µ–Ω–Ω–æ—Å—Ç—å, –ø–æ–ª–µ–∑–Ω—ã –≤ –∏—Å—Ç–æ—Ä–∏–∏:
1. "‚ú® –ù–æ–≤—ã–π —á–∞—Ç —Å–æ–∑–¥–∞–Ω!..." (—Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏)
2. "‚úÖ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–æ –Ω–∞ —á–∞—Ç: ... + –∏—Å—Ç–æ—Ä–∏—è"
3. "‚úÖ –ß–∞—Ç –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω..."
4. "‚úÖ –ß–∞—Ç —É–¥–∞–ª–µ–Ω..."
5. "‚ö†Ô∏è –£–¥–∞–ª–∏—Ç—å —á–∞—Ç... –Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ"
6. –ü–æ–º–æ—â—å (–¥–ª–∏–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π)
7. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (—Å–≤–æ–¥–∫–∞ –ø–æ–ª–µ–π)
8. "üìå –î–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã..." (–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏)

## –í—ã–≤–æ–¥

**–ü—Ä–æ–±–ª–µ–º–∞:** `edit_message_reply_markup(reply_markup=None)` —É–¥–∞–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ –∫–Ω–æ–ø–∫–∏, —Ç–µ–∫—Å—Ç –æ—Å—Ç–∞–µ—Ç—Å—è.

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `delete_message()` –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è —Å—Ç–∞—Ä–æ–≥–æ –º–µ–Ω—é –≤–º–µ—Å—Ç–æ —É–¥–∞–ª–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –∫–Ω–æ–ø–æ–∫.

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞:** –£–º–Ω–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è - –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã —É–¥–∞–ª—è—Ç—å, –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ –æ—Å—Ç–∞–≤–ª—è—Ç—å —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç.
