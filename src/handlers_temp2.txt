    # ============ TEST CALLBACK HANDLER FOR MENU CRAWLER ============
    @app.on_message(filters.command("test_callback"))  # type: ignore[misc,reportUntypedFunctionDecorator]
    async def test_callback_handler(client: Client, message: Message):
        """
        –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è Menu Crawler.
        –≠–º—É–ª–∏—Ä—É–µ—Ç –Ω–∞–∂–∞—Ç–∏–µ callback –∫–Ω–æ–ø–∫–∏ –±–µ–∑ —Ä–µ–∞–ª—å–Ω–æ–≥–æ CallbackQuery.

        –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨: –î–æ—Å—Ç—É–ø–µ–Ω –¢–û–õ–¨–ö–û –¥–ª—è TEST_USER_ID.

        –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
            /test_callback menu_system
            /test_callback show_stats
        """
        TEST_USER_ID = int(os.getenv('TEST_USER_ID', 0))

        # –ó–∞—â–∏—Ç–∞: —Ç–æ–ª—å–∫–æ –¥–ª—è TEST_USER_ID
        if not TEST_USER_ID or message.from_user.id != TEST_USER_ID:
            await message.reply("üö´ –≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è")
            return

        # –ò–∑–≤–ª–µ—á—å callback_data –∏–∑ –∫–æ–º–∞–Ω–¥—ã
        parts = message.text.split(maxsplit=1)
        if len(parts) < 2:
            await message.reply("‚ö†Ô∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: /test_callback <callback_data>")
            return

        callback_data = parts[1].strip()

        # –°–æ–∑–¥–∞—Ç—å mock CallbackQuery
        from types import SimpleNamespace

        # –ü–æ–ª—É—á–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –±–æ—Ç–∞ —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π
        bot_message = None
        async for msg in client.get_chat_history(message.chat.id, limit=5):
            if msg.reply_markup and msg.from_user and msg.from_user.is_bot:
                bot_message = msg
                break

        if not bot_message:
            await message.reply("‚ö†Ô∏è –ù–µ –Ω–∞–π–¥–µ–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –±–æ—Ç–∞ —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π")
            return

        # Mock CallbackQuery
        mock_callback = SimpleNamespace(
            id=f"test_{callback_data}_{message.id}",
            from_user=message.from_user,
            message=bot_message,
            chat_instance="test_crawler",
            data=callback_data,
            answer=lambda text="", show_alert=False: asyncio.create_task(
                message.reply(f"ü§ñ {text}" if text else "ü§ñ OK")
            )
        )

        try:
            # –í—ã–∑–≤–∞—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫
            await callback_query_handler(client, mock_callback)
            await message.reply(f"‚úÖ Test callback: {callback_data}")
        except Exception as e:
            await message.reply(f"‚ùå Error: {str(e)}")
            logging.exception(f"test_callback error: {e}")
    # ============ END TEST CALLBACK HANDLER ============

